import{y as ce,z as ve,A as fe,b as de,B as Ae,C as He,j as C,D as P,e,E as F,G as me,H as Be,I as Oe,J as Pe,K as Ve,L as he,a as x,u as pe,o as B,c as D,h as q,p as ne,l as Z,n as O,M as X,N as le,O as ze,k as G,P as Q,Q as Y,T as re,g as J,R as Re,r as ge,i as ye,F as De,m as Ke,t as Ue,_ as Ie,S as We,U as je,V as Fe,W as Xe,w as Ge,X as Je}from"./index-IY-MfvKr.js";import{t as ie}from"./el-image-viewer--agiQoK4.js";const Qe=(a,b,n)=>ve(a.subTree).filter(u=>{var v;return fe(u)&&((v=u.type)==null?void 0:v.name)===b&&!!u.component}).map(u=>u.component.uid).map(u=>n[u]).filter(u=>!!u),Ye=(a,b)=>{const n={},s=ce([]);return{children:s,addChild:v=>{n[v.uid]=v,s.value=Qe(a,b,n)},removeChild:v=>{delete n[v],s.value=s.value.filter(o=>o.uid!==v)}}},qe=de({initialIndex:{type:Number,default:0},height:{type:String,default:""},trigger:{type:String,values:["hover","click"],default:"hover"},autoplay:{type:Boolean,default:!0},interval:{type:Number,default:3e3},indicatorPosition:{type:String,values:["","none","outside"],default:""},arrow:{type:String,values:["always","hover","never"],default:"hover"},type:{type:String,values:["","card"],default:""},loop:{type:Boolean,default:!0},direction:{type:String,values:["horizontal","vertical"],default:"horizontal"},pauseOnHover:{type:Boolean,default:!0}}),Ze={change:(a,b)=>[a,b].every(Ae)},Ce=Symbol("carouselContextKey"),ue=300,xe=(a,b,n)=>{const{children:s,addChild:w,removeChild:u}=Ye(he(),"ElCarouselItem"),v=He(),o=C(-1),p=C(null),k=C(!1),g=C(),E=C(0),S=C(!0),T=P(()=>a.arrow!=="never"&&!e(_)),N=P(()=>s.value.some(t=>t.props.label.toString().length>0)),A=P(()=>a.type==="card"),_=P(()=>a.direction==="vertical"),M=P(()=>a.height!=="auto"?{height:a.height}:{height:`${E.value}px`,overflow:"hidden"}),H=ie(t=>{d(t)},ue,{trailing:!0}),K=ie(t=>{ee(t)},ue),l=t=>S.value?o.value<=1?t<=1:t>1:!0;function r(){p.value&&(clearInterval(p.value),p.value=null)}function f(){a.interval<=0||!a.autoplay||p.value||(p.value=setInterval(()=>h(),a.interval))}const h=()=>{o.value<s.value.length-1?o.value=o.value+1:a.loop&&(o.value=0)};function d(t){if(Ve(t)){const R=s.value.filter(V=>V.props.name===t);R.length>0&&(t=s.value.indexOf(R[0]))}if(t=Number(t),Number.isNaN(t)||t!==Math.floor(t))return;const c=s.value.length,$=o.value;t<0?o.value=a.loop?c-1:0:t>=c?o.value=a.loop?0:c-1:o.value=t,$===o.value&&i($),ae()}function i(t){s.value.forEach((c,$)=>{c.translateItem($,o.value,t)})}function L(t,c){var $,R,V,W;const j=e(s),se=j.length;if(se===0||!t.states.inStage)return!1;const Ne=c+1,Ee=c-1,oe=se-1,Te=j[oe].states.active,Me=j[0].states.active,Le=(R=($=j[Ne])==null?void 0:$.states)==null?void 0:R.active,$e=(W=(V=j[Ee])==null?void 0:V.states)==null?void 0:W.active;return c===oe&&Me||Le?"left":c===0&&Te||$e?"right":!1}function U(){k.value=!0,a.pauseOnHover&&r()}function y(){k.value=!1,f()}function m(t){e(_)||s.value.forEach((c,$)=>{t===L(c,$)&&(c.states.hover=!0)})}function I(){e(_)||s.value.forEach(t=>{t.states.hover=!1})}function z(t){o.value=t}function ee(t){a.trigger==="hover"&&t!==o.value&&(o.value=t)}function Se(){d(o.value-1)}function _e(){d(o.value+1)}function ae(){r(),a.pauseOnHover||f()}function be(t){a.height==="auto"&&(E.value=t)}function ke(){var t;const c=(t=v.default)==null?void 0:t.call(v);if(!c)return null;const $=ve(c),R="ElCarouselItem",V=$.filter(W=>fe(W)&&W.type.name===R);return(V==null?void 0:V.length)===2&&a.loop&&!A.value?(S.value=!0,V):(S.value=!1,null)}F(()=>o.value,(t,c)=>{i(c),S.value&&(t=t%2,c=c%2),c>-1&&b("change",t,c)}),F(()=>a.autoplay,t=>{t?f():r()}),F(()=>a.loop,()=>{d(o.value)}),F(()=>a.interval,()=>{ae()});const te=ce();return me(()=>{F(()=>s.value,()=>{s.value.length>0&&d(a.initialIndex)},{immediate:!0}),te.value=Be(g.value,()=>{i()}),f()}),Oe(()=>{r(),g.value&&te.value&&te.value.stop()}),Pe(Ce,{root:g,isCardType:A,isVertical:_,items:s,loop:a.loop,addItem:w,removeItem:u,setActiveItem:d,setContainerHeight:be}),{root:g,activeIndex:o,arrowDisplay:T,hasLabel:N,hover:k,isCardType:A,items:s,isVertical:_,containerStyle:M,isItemsTwoLength:S,handleButtonEnter:m,handleButtonLeave:I,handleIndicatorClick:z,handleMouseEnter:U,handleMouseLeave:y,setActiveItem:d,prev:Se,next:_e,PlaceholderItem:ke,isTwoLengthShow:l,throttledArrowClick:H,throttledIndicatorHover:K}},et=["onMouseenter","onClick"],tt={key:0},at="ElCarousel",st=x({name:at}),ot=x({...st,props:qe,emits:Ze,setup(a,{expose:b,emit:n}){const s=a,{root:w,activeIndex:u,arrowDisplay:v,hasLabel:o,hover:p,isCardType:k,items:g,isVertical:E,containerStyle:S,handleButtonEnter:T,handleButtonLeave:N,handleIndicatorClick:A,handleMouseEnter:_,handleMouseLeave:M,setActiveItem:H,prev:K,next:l,PlaceholderItem:r,isTwoLengthShow:f,throttledArrowClick:h,throttledIndicatorHover:d}=xe(s,n),i=pe("carousel"),L=P(()=>{const y=[i.b(),i.m(s.direction)];return e(k)&&y.push(i.m("card")),y}),U=P(()=>{const y=[i.e("indicators"),i.em("indicators",s.direction)];return e(o)&&y.push(i.em("indicators","labels")),s.indicatorPosition==="outside"&&y.push(i.em("indicators","outside")),e(E)&&y.push(i.em("indicators","right")),y});return b({setActiveItem:H,prev:K,next:l}),(y,m)=>(B(),D("div",{ref_key:"root",ref:w,class:O(e(L)),onMouseenter:m[6]||(m[6]=X((...I)=>e(_)&&e(_)(...I),["stop"])),onMouseleave:m[7]||(m[7]=X((...I)=>e(M)&&e(M)(...I),["stop"]))},[q("div",{class:O(e(i).e("container")),style:ye(e(S))},[e(v)?(B(),ne(re,{key:0,name:"carousel-arrow-left",persisted:""},{default:Z(()=>[Y(q("button",{type:"button",class:O([e(i).e("arrow"),e(i).em("arrow","left")]),onMouseenter:m[0]||(m[0]=I=>e(T)("left")),onMouseleave:m[1]||(m[1]=(...I)=>e(N)&&e(N)(...I)),onClick:m[2]||(m[2]=X(I=>e(h)(e(u)-1),["stop"]))},[G(e(le),null,{default:Z(()=>[G(e(ze))]),_:1})],34),[[Q,(y.arrow==="always"||e(p))&&(s.loop||e(u)>0)]])]),_:1})):J("v-if",!0),e(v)?(B(),ne(re,{key:1,name:"carousel-arrow-right",persisted:""},{default:Z(()=>[Y(q("button",{type:"button",class:O([e(i).e("arrow"),e(i).em("arrow","right")]),onMouseenter:m[3]||(m[3]=I=>e(T)("right")),onMouseleave:m[4]||(m[4]=(...I)=>e(N)&&e(N)(...I)),onClick:m[5]||(m[5]=X(I=>e(h)(e(u)+1),["stop"]))},[G(e(le),null,{default:Z(()=>[G(e(Re))]),_:1})],34),[[Q,(y.arrow==="always"||e(p))&&(s.loop||e(u)<e(g).length-1)]])]),_:1})):J("v-if",!0),G(e(r)),ge(y.$slots,"default")],6),y.indicatorPosition!=="none"?(B(),D("ul",{key:0,class:O(e(U))},[(B(!0),D(De,null,Ke(e(g),(I,z)=>Y((B(),D("li",{key:z,class:O([e(i).e("indicator"),e(i).em("indicator",y.direction),e(i).is("active",z===e(u))]),onMouseenter:ee=>e(d)(z),onClick:X(ee=>e(A)(z),["stop"])},[q("button",{class:O(e(i).e("button"))},[e(o)?(B(),D("span",tt,Ue(I.props.label),1)):J("v-if",!0)],2)],42,et)),[[Q,e(f)(z)]])),128))],2)):J("v-if",!0)],34))}});var nt=Ie(ot,[["__file","carousel.vue"]]);const lt=de({name:{type:String,default:""},label:{type:[String,Number],default:""}}),rt=(a,b)=>{const n=We(Ce),s=he(),w=.83,u=C(),v=C(!1),o=C(0),p=C(1),k=C(!1),g=C(!1),E=C(!1),S=C(!1),{isCardType:T,isVertical:N}=n;function A(l,r,f){const h=f-1,d=r-1,i=r+1,L=f/2;return r===0&&l===h?-1:r===h&&l===0?f:l<d&&r-l>=L?f+1:l>i&&l-r>=L?-2:l}function _(l,r){var f,h;const d=e(N)?((f=n.root.value)==null?void 0:f.offsetHeight)||0:((h=n.root.value)==null?void 0:h.offsetWidth)||0;return E.value?d*((2-w)*(l-r)+1)/4:l<r?-(1+w)*d/4:(3+w)*d/4}function M(l,r,f){const h=n.root.value;return h?((f?h.offsetHeight:h.offsetWidth)||0)*(l-r):0}const H=(l,r,f)=>{var h;const d=e(T),i=(h=n.items.value.length)!=null?h:Number.NaN,L=l===r;!d&&!Xe(f)&&(S.value=L||l===f),!L&&i>2&&n.loop&&(l=A(l,r,i));const U=e(N);k.value=L,d?(E.value=Math.round(Math.abs(l-r))<=1,o.value=_(l,r),p.value=e(k)?1:w):o.value=M(l,r,U),g.value=!0,L&&u.value&&n.setContainerHeight(u.value.offsetHeight)};function K(){if(n&&e(T)){const l=n.items.value.findIndex(({uid:r})=>r===s.uid);n.setActiveItem(l)}}return me(()=>{n.addItem({props:a,states:je({hover:v,translate:o,scale:p,active:k,ready:g,inStage:E,animating:S}),uid:s.uid,translateItem:H})}),Fe(()=>{n.removeItem(s.uid)}),{carouselItemRef:u,active:k,animating:S,hover:v,inStage:E,isVertical:N,translate:o,isCardType:T,scale:p,ready:g,handleItemClick:K}},it=x({name:"ElCarouselItem"}),ut=x({...it,props:lt,setup(a){const b=a,n=pe("carousel"),{carouselItemRef:s,active:w,animating:u,hover:v,inStage:o,isVertical:p,translate:k,isCardType:g,scale:E,ready:S,handleItemClick:T}=rt(b),N=P(()=>[n.e("item"),n.is("active",w.value),n.is("in-stage",o.value),n.is("hover",v.value),n.is("animating",u.value),{[n.em("item","card")]:g.value,[n.em("item","card-vertical")]:g.value&&p.value}]),A=P(()=>{const M=`${`translate${e(p)?"Y":"X"}`}(${e(k)}px)`,H=`scale(${e(E)})`;return{transform:[M,H].join(" ")}});return(_,M)=>Y((B(),D("div",{ref_key:"carouselItemRef",ref:s,class:O(e(N)),style:ye(e(A)),onClick:M[0]||(M[0]=(...H)=>e(T)&&e(T)(...H))},[e(g)?Y((B(),D("div",{key:0,class:O(e(n).e("mask"))},null,2)),[[Q,!e(w)]]):J("v-if",!0),ge(_.$slots,"default")],6)),[[Q,e(S)]])}});var we=Ie(ut,[["__file","carousel-item.vue"]]);const ft=Ge(nt,{CarouselItem:we}),dt=Je(we);export{ft as E,dt as a};
